<!-- extend base layout -->
{% extends "base.html" %}

{% block content %}
<div class="page-header">
    <h1>Wyniki</h1>

    <div class="container">
      <div class="row">
        {% set ns = namespace(cur = 1) %}
        {% for qu in allQus %}

        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">

          <div class="chart-container"><div id="chart_div{{ ns.cur }}"> </div></div>

        </div>
        {% set ns.cur = ns.cur + 1 %}
        {% endfor %}
      </div>
    </div>
</div>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load('visualization', '1', {'packages':['corechart']});

    {% set ns.cur = 1 %}
    {% for qu in allQus %}
    google.setOnLoadCallback(drawChart{{ ns.cur }});
    {% set ns.cur = ns.cur + 1 %}
    {% endfor %}

    {% set ns.cur = 1 %}
    {% for qu in allQus %}
    
    function drawChart{{ ns.cur }}() {
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Question');
      data.addColumn('number', 'Ilość odpowiedzi');
      //data.addRows([["1", 1], ["22", 33]]);
      data.addRows({{ allRows[ns.cur-1]|tojson }});

      var options = {
        title: "Pytanie {{ ns.cur }}",
        legend: 'none',
        vAxis: {
          baseline: 0,
          title: "Liczba ankietowanych",
          //format: '0'
        },
        hAxis: {
          title: "Numer wybranej odpowiedzi"
        },
        
      };

      var chart = new google.visualization.ColumnChart(
              document.getElementById('chart_div{{ ns.cur }}'));
      chart.draw(data, options);
    }

    {% set ns.cur = ns.cur + 1 %}
    {% endfor %}


</script>


{% endblock %}